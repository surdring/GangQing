{
  "openapi": "3.1.0",
  "info": {
    "title": "GangQing API",
    "version": "0.1.0"
  },
  "paths": {
    "/api/v1/health": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Health",
        "operationId": "health_api_v1_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response Health Api V1 Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Login Api",
        "operationId": "login_api_api_v1_auth_login_post",
        "parameters": [
          {
            "name": "X-Request-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Request-Id"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenPairResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Refresh Api",
        "operationId": "refresh_api_api_v1_auth_refresh_post",
        "parameters": [
          {
            "name": "X-Request-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Request-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenPairResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Logout Api",
        "operationId": "logout_api_api_v1_auth_logout_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Request-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Request-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LogoutRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Logout Api Api V1 Auth Logout Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat": {
      "post": {
        "tags": [
          "chat"
        ],
        "summary": "Chat",
        "operationId": "chat_api_v1_chat_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/stream": {
      "get": {
        "tags": [
          "chat"
        ],
        "summary": "Chat Stream (SSE)",
        "description": "Server-Sent Events (SSE) streaming endpoint for chat.\n\nContract (authoritative):\n  - docs/contracts/api-and-events-draft.md#6.1\n\nEvent encoding rules:\n  - Content-Type: text/event-stream\n  - Each SSE message MUST contain a single-line JSON in data: ...\n  - Event type is determined by JSON field `type` (do not rely on SSE `event:` line)\n\nUnified JSON envelope (all events):\n  - type: string (required)\n  - timestamp: ISO 8601 string (required)\n  - requestId: string (required)\n  - tenantId: string (required)\n  - projectId: string (required)\n  - sessionId: string (optional)\n  - sequence: number (required, monotonic increasing within one SSE connection)\n  - payload: object (required, varies by type)\n\nMinimal event types (must be supported):\n  - meta, progress, tool.call, tool.result, message.delta, evidence.update, warning, error, final\n\nError event:\n  - type=error payload MUST be an ErrorResponse/AppError (message MUST be English)\n\nFinal event:\n  - type=final payload.status: success|error|cancelled\n\nNOTE: OpenAPI cannot fully model SSE event streams; the response schema below is documented as a raw stream of text/event-stream.",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Request-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Request-Id"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSE stream. Each chunk is an SSE message whose data field is a single-line JSON envelope.",
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string"
                },
                "examples": {
                  "meta": {
                    "summary": "meta event",
                    "value": "data: {\"type\":\"meta\",\"timestamp\":\"2026-02-19T00:00:00Z\",\"requestId\":\"req-001\",\"tenantId\":\"tenant-a\",\"projectId\":\"project-a\",\"sessionId\":\"sess-001\",\"sequence\":1,\"payload\":{\"capabilities\":{\"streaming\":true,\"evidenceIncremental\":true,\"cancellationSupported\":true}}}\n\n"
                  },
                  "messageDelta": {
                    "summary": "message.delta event",
                    "value": "data: {\"type\":\"message.delta\",\"timestamp\":\"2026-02-19T00:00:01Z\",\"requestId\":\"req-001\",\"tenantId\":\"tenant-a\",\"projectId\":\"project-a\",\"sessionId\":\"sess-001\",\"sequence\":2,\"payload\":{\"delta\":\"Hello\"}}\n\n"
                  },
                  "error": {
                    "summary": "error event (ErrorResponse/AppError)",
                    "value": "data: {\"type\":\"error\",\"timestamp\":\"2026-02-19T00:00:02Z\",\"requestId\":\"req-001\",\"tenantId\":\"tenant-a\",\"projectId\":\"project-a\",\"sessionId\":\"sess-001\",\"sequence\":3,\"payload\":{\"code\":\"AUTH_ERROR\",\"message\":\"Missing tenantId or projectId\",\"details\":{\"tenantId\":null,\"projectId\":null},\"retryable\":false,\"requestId\":\"req-001\"}}\n\n"
                  },
                  "final": {
                    "summary": "final event",
                    "value": "data: {\"type\":\"final\",\"timestamp\":\"2026-02-19T00:00:03Z\",\"requestId\":\"req-001\",\"tenantId\":\"tenant-a\",\"projectId\":\"project-a\",\"sessionId\":\"sess-001\",\"sequence\":4,\"payload\":{\"status\":\"error\"}}\n\n"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/equipment": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Equipment Api",
        "description": "Upsert equipment entity within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Cross-scope access denied\n    - FORBIDDEN: Permission denied\n\nExamples:\n    - success:\n      - POST /api/v1/semantic/equipment\n      - returns: {\"status\": \"ok\"}\n    - failure (missing scope headers):\n      - returns ErrorResponse(code=AUTH_ERROR)\n\nSee:\n    - docs/contracts/api-and-events-draft.md (ErrorResponse, headers)\n    - docs/api/semantic-api.md (more examples)",
        "operationId": "upsert_equipment_api_api_v1_semantic_equipment_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EntityEquipment"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Upsert Equipment Api Api V1 Semantic Equipment Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/batches/batch": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Batch Batch Api",
        "description": "Batch upsert batch entities within tenant/project scope.\n\nQuery:\n    - continue_on_error: when true, per-item transaction and returns results[]\n\nErrors:\n    - AUTH_ERROR: Missing scope headers or cross-scope access denied\n    - FORBIDDEN: Permission denied\n    - INTERNAL_ERROR: Unexpected server error (continue_on_error only)\n\nExamples:\n    - success: returns {\"status\":\"ok\"}\n    - partial failure (continue_on_error=true): returns {\"status\":\"ok\",\"results\":[...]}\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "upsert_batch_batch_api_api_v1_semantic_batches_batch_post",
        "parameters": [
          {
            "name": "continue_on_error",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Continue On Error"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/EntityBatch"
                },
                "title": "Payload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Upsert Batch Batch Api Api V1 Semantic Batches Batch Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/materials/batch": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Material Batch Api",
        "description": "Batch upsert material entities within tenant/project scope.\n\nQuery:\n    - continue_on_error: when true, per-item transaction and returns results[]\n\nErrors:\n    - AUTH_ERROR: Missing scope headers or cross-scope access denied\n    - FORBIDDEN: Permission denied\n    - INTERNAL_ERROR: Unexpected server error (continue_on_error only)\n\nExamples:\n    - success: returns {\"status\":\"ok\"}\n    - partial failure (continue_on_error=true): returns {\"status\":\"ok\",\"results\":[...]}\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "upsert_material_batch_api_api_v1_semantic_materials_batch_post",
        "parameters": [
          {
            "name": "continue_on_error",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Continue On Error"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/EntityMaterial"
                },
                "title": "Payload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Upsert Material Batch Api Api V1 Semantic Materials Batch Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/equipment/batch": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Equipment Batch Api",
        "description": "Batch upsert equipment entities within tenant/project scope.\n\nQuery:\n    - continue_on_error: when true, per-item transaction and returns results[]\n\nErrors:\n    - AUTH_ERROR: Missing scope headers or cross-scope access denied\n    - FORBIDDEN: Permission denied\n    - INTERNAL_ERROR: Unexpected server error (continue_on_error only)\n\nExamples:\n    - success: returns {\"status\":\"ok\"}\n    - failure: returns ErrorResponse(code=AUTH_ERROR|FORBIDDEN)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "upsert_equipment_batch_api_api_v1_semantic_equipment_batch_post",
        "parameters": [
          {
            "name": "continue_on_error",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Continue On Error"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/EntityEquipment"
                },
                "title": "Payload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Upsert Equipment Batch Api Api V1 Semantic Equipment Batch Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/equipment/{unified_id}": {
      "get": {
        "tags": [
          "semantic"
        ],
        "summary": "Get Equipment Api",
        "description": "Get equipment entity by unified_id within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Missing scope headers\n    - FORBIDDEN: Permission denied\n    - NOT_FOUND: Equipment not found\n\nExamples:\n    - success: returns equipment object\n    - failure: returns ErrorResponse(code=NOT_FOUND)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "get_equipment_api_api_v1_semantic_equipment__unified_id__get",
        "parameters": [
          {
            "name": "unified_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Unified Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Equipment Api Api V1 Semantic Equipment  Unified Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/materials": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Material Api",
        "description": "Upsert material entity within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Cross-scope access denied\n    - FORBIDDEN: Permission denied\n\nExamples:\n    - success: returns {\"status\":\"ok\"}\n    - failure: returns ErrorResponse(code=AUTH_ERROR)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "upsert_material_api_api_v1_semantic_materials_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EntityMaterial"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Upsert Material Api Api V1 Semantic Materials Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/materials/{unified_id}": {
      "get": {
        "tags": [
          "semantic"
        ],
        "summary": "Get Material Api",
        "description": "Get material entity by unified_id within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Missing scope headers\n    - FORBIDDEN: Permission denied\n    - NOT_FOUND: Material not found\n\nExamples:\n    - success: returns material object\n    - failure: returns ErrorResponse(code=NOT_FOUND)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "get_material_api_api_v1_semantic_materials__unified_id__get",
        "parameters": [
          {
            "name": "unified_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Unified Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Material Api Api V1 Semantic Materials  Unified Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/batches": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Batch Api",
        "description": "Upsert batch entity within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Cross-scope access denied\n    - FORBIDDEN: Permission denied\n\nExamples:\n    - success: returns {\"status\":\"ok\"}\n    - failure: returns ErrorResponse(code=AUTH_ERROR)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "upsert_batch_api_api_v1_semantic_batches_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EntityBatch"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Upsert Batch Api Api V1 Semantic Batches Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/batches/{unified_batch_id}": {
      "get": {
        "tags": [
          "semantic"
        ],
        "summary": "Get Batch Api",
        "description": "Get batch entity by unified_batch_id within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Missing scope headers\n    - FORBIDDEN: Permission denied\n    - NOT_FOUND: Batch not found\n\nExamples:\n    - success: returns batch object\n    - failure: returns ErrorResponse(code=NOT_FOUND)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "get_batch_api_api_v1_semantic_batches__unified_batch_id__get",
        "parameters": [
          {
            "name": "unified_batch_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Unified Batch Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Batch Api Api V1 Semantic Batches  Unified Batch Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/events": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Event Api",
        "description": "Upsert production event within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Cross-scope access denied\n    - FORBIDDEN: Permission denied\n\nExamples:\n    - success: returns {\"status\":\"ok\"}\n    - failure: returns ErrorResponse(code=AUTH_ERROR)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "upsert_event_api_api_v1_semantic_events_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductionEvent"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Upsert Event Api Api V1 Semantic Events Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "semantic"
        ],
        "summary": "List Events Api",
        "description": "List production events with pagination.\n\nReturns:\n    {\"total\": int, \"items\": list[dict]}\n\nErrors:\n    - VALIDATION_ERROR: Invalid datetime format\n    - AUTH_ERROR: Missing scope headers\n    - FORBIDDEN: Permission denied\n\nExamples:\n    - success: GET /api/v1/semantic/events?limit=10&offset=0\n    - failure: returns ErrorResponse(code=VALIDATION_ERROR)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "list_events_api_api_v1_semantic_events_get",
        "parameters": [
          {
            "name": "equipment_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Equipment Id"
            }
          },
          {
            "name": "batch_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Batch Id"
            }
          },
          {
            "name": "start_time",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start Time"
            }
          },
          {
            "name": "end_time",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End Time"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 200,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response List Events Api Api V1 Semantic Events Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/events/batch": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Event Batch Api",
        "description": "Batch upsert production events within tenant/project scope.\n\nQuery:\n    - continue_on_error: when true, per-item transaction and returns results[]\n\nErrors:\n    - AUTH_ERROR: Missing scope headers or cross-scope access denied\n    - FORBIDDEN: Permission denied\n    - INTERNAL_ERROR: Unexpected server error (continue_on_error only)\n\nExamples:\n    - success: returns {\"status\":\"ok\"}\n    - partial failure (continue_on_error=true): returns {\"status\":\"ok\",\"results\":[...]}\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "upsert_event_batch_api_api_v1_semantic_events_batch_post",
        "parameters": [
          {
            "name": "continue_on_error",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Continue On Error"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ProductionEvent"
                },
                "title": "Payload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Upsert Event Batch Api Api V1 Semantic Events Batch Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/kpis": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Kpi Api",
        "description": "Upsert KPI definition within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Cross-scope access denied\n    - FORBIDDEN: Permission denied\n\nExamples:\n    - success: returns {\"status\":\"ok\"}\n    - failure: returns ErrorResponse(code=AUTH_ERROR)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "upsert_kpi_api_api_v1_semantic_kpis_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KPIDefinition"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Upsert Kpi Api Api V1 Semantic Kpis Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "semantic"
        ],
        "summary": "List Kpis Api",
        "description": "List KPI definitions with pagination.\n\nReturns:\n    {\"total\": int, \"items\": list[dict]}\n\nErrors:\n    - AUTH_ERROR: Missing scope headers\n    - FORBIDDEN: Permission denied\n\nExamples:\n    - success: GET /api/v1/semantic/kpis?limit=10&offset=0\n    - failure: returns ErrorResponse(code=FORBIDDEN)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "list_kpis_api_api_v1_semantic_kpis_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 200,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response List Kpis Api Api V1 Semantic Kpis Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/kpis/batch": {
      "post": {
        "tags": [
          "semantic"
        ],
        "summary": "Upsert Kpi Batch Api",
        "description": "Batch upsert KPI definitions within tenant/project scope.\n\nQuery:\n    - continue_on_error: when true, per-item transaction and returns results[]\n\nErrors:\n    - AUTH_ERROR: Missing scope headers or cross-scope access denied\n    - FORBIDDEN: Permission denied\n    - INTERNAL_ERROR: Unexpected server error (continue_on_error only)\n\nExamples:\n    - success: returns {\"status\":\"ok\"}\n    - partial failure (continue_on_error=true): returns {\"status\":\"ok\",\"results\":[...]}\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "upsert_kpi_batch_api_api_v1_semantic_kpis_batch_post",
        "parameters": [
          {
            "name": "continue_on_error",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Continue On Error"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/KPIDefinition"
                },
                "title": "Payload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Upsert Kpi Batch Api Api V1 Semantic Kpis Batch Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/kpis/{kpi_id}": {
      "get": {
        "tags": [
          "semantic"
        ],
        "summary": "Get Kpi Api",
        "description": "Get KPI definition by kpi_id within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Missing scope headers\n    - FORBIDDEN: Permission denied\n    - NOT_FOUND: KPI definition not found\n\nExamples:\n    - success: returns KPI definition object\n    - failure: returns ErrorResponse(code=NOT_FOUND)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "get_kpi_api_api_v1_semantic_kpis__kpi_id__get",
        "parameters": [
          {
            "name": "kpi_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Kpi Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Kpi Api Api V1 Semantic Kpis  Kpi Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/semantic/kpis/{kpi_id}/lineage": {
      "get": {
        "tags": [
          "semantic"
        ],
        "summary": "Get Kpi Lineage Api",
        "description": "Get KPI lineage (upstream/downstream) within tenant/project scope.\n\nErrors:\n    - AUTH_ERROR: Missing scope headers\n    - FORBIDDEN: Permission denied\n    - NOT_FOUND: KPI definition not found\n\nExamples:\n    - success: returns {\"nodes\": [...], \"edges\": [...]}\n    - failure: returns ErrorResponse(code=NOT_FOUND)\n\nSee:\n    - docs/contracts/api-and-events-draft.md\n    - docs/api/semantic-api.md",
        "operationId": "get_kpi_lineage_api_api_v1_semantic_kpis__kpi_id__lineage_get",
        "parameters": [
          {
            "name": "kpi_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Kpi Id"
            }
          },
          {
            "name": "max_depth",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 5,
              "title": "Max Depth"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Tenant-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Tenant-Id"
            }
          },
          {
            "name": "X-Project-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Kpi Lineage Api Api V1 Semantic Kpis  Kpi Id  Lineage Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ChatRequest": {
        "properties": {
          "session_id": {
            "type": "string",
            "minLength": 1,
            "title": "Session Id"
          },
          "message": {
            "type": "string",
            "minLength": 1,
            "title": "Message"
          },
          "user_id": {
            "type": "string",
            "minLength": 1,
            "title": "User Id"
          },
          "user_role": {
            "type": "string",
            "minLength": 1,
            "title": "User Role"
          },
          "attachments": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Attachments",
            "default": []
          },
          "language": {
            "type": "string",
            "title": "Language",
            "default": "zh"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "message",
          "user_id",
          "user_role"
        ],
        "title": "ChatRequest"
      },
      "ChatResponse": {
        "properties": {
          "message_id": {
            "type": "string",
            "title": "Message Id"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "evidence_chain": {
            "items": {
              "$ref": "#/components/schemas/Evidence"
            },
            "type": "array",
            "title": "Evidence Chain",
            "default": []
          },
          "chart_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "items": {},
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chart Data"
          },
          "chart_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chart Type"
          },
          "actions": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Actions",
            "default": []
          },
          "confidence": {
            "type": "string",
            "enum": [
              "High",
              "Medium",
              "Low"
            ],
            "title": "Confidence",
            "default": "Medium"
          },
          "processing_time_ms": {
            "type": "integer",
            "title": "Processing Time Ms"
          }
        },
        "type": "object",
        "required": [
          "message_id",
          "content",
          "processing_time_ms"
        ],
        "title": "ChatResponse"
      },
      "EntityBatch": {
        "properties": {
          "unified_batch_id": {
            "type": "string",
            "minLength": 1,
            "title": "Unified Batch Id"
          },
          "batch_type": {
            "type": "string",
            "enum": [
              "furnace",
              "steel",
              "rolling"
            ],
            "title": "Batch Type"
          },
          "mes_batch_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mes Batch No"
          },
          "erp_order_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Erp Order No"
          },
          "dcs_batch_tag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dcs Batch Tag"
          },
          "start_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Start Time"
          },
          "end_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "End Time"
          },
          "equipment_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Equipment Id"
          }
        },
        "type": "object",
        "required": [
          "unified_batch_id",
          "batch_type"
        ],
        "title": "EntityBatch"
      },
      "EntityEquipment": {
        "properties": {
          "unified_id": {
            "type": "string",
            "minLength": 1,
            "title": "Unified Id"
          },
          "equipment_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Equipment Name"
          },
          "equipment_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Equipment Type"
          },
          "eam_asset_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Eam Asset Id"
          },
          "dcs_tag_prefix": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dcs Tag Prefix"
          },
          "mes_equipment_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mes Equipment Code"
          },
          "location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Location"
          },
          "workshop": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workshop"
          },
          "installation_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Installation Date"
          }
        },
        "type": "object",
        "required": [
          "unified_id"
        ],
        "title": "EntityEquipment"
      },
      "EntityMaterial": {
        "properties": {
          "unified_id": {
            "type": "string",
            "minLength": 1,
            "title": "Unified Id"
          },
          "material_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Name"
          },
          "material_category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Category"
          },
          "erp_material_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Erp Material Code"
          },
          "mes_material_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mes Material Code"
          },
          "lims_sample_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lims Sample Type"
          },
          "specifications": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Specifications"
          },
          "unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit"
          }
        },
        "type": "object",
        "required": [
          "unified_id"
        ],
        "title": "EntityMaterial"
      },
      "Evidence": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "source": {
            "type": "string",
            "title": "Source"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "High",
              "Medium",
              "Low"
            ],
            "title": "Confidence"
          },
          "type": {
            "type": "string",
            "enum": [
              "SAP",
              "MES",
              "DCS",
              "IoT",
              "Manual"
            ],
            "title": "Type"
          },
          "details": {
            "type": "string",
            "title": "Details"
          },
          "dataPoints": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Datapoints"
          }
        },
        "type": "object",
        "required": [
          "id",
          "source",
          "timestamp",
          "confidence",
          "type",
          "details"
        ],
        "title": "Evidence"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "LoginRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "minLength": 1,
            "title": "User Id"
          },
          "password": {
            "type": "string",
            "minLength": 1,
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "password"
        ],
        "title": "LoginRequest"
      },
      "RefreshRequest": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "minLength": 1,
            "title": "Refresh Token"
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "RefreshRequest"
      },
      "LogoutRequest": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "minLength": 1,
            "title": "Refresh Token"
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "LogoutRequest"
      },
      "TokenPairResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "minimum": 1,
            "title": "Expires In",
            "description": "Access token TTL in seconds"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "expires_in"
        ],
        "title": "TokenPairResponse"
      },
      "KPIDefinition": {
        "properties": {
          "kpi_id": {
            "type": "string",
            "minLength": 1,
            "title": "Kpi Id"
          },
          "kpi_name": {
            "type": "string",
            "minLength": 1,
            "title": "Kpi Name"
          },
          "kpi_name_en": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kpi Name En"
          },
          "calculation_formula": {
            "type": "string",
            "minLength": 1,
            "title": "Calculation Formula"
          },
          "data_sources": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Data Sources"
          },
          "version": {
            "type": "string",
            "minLength": 1,
            "title": "Version"
          },
          "effective_date": {
            "type": "string",
            "format": "date",
            "title": "Effective Date"
          },
          "deprecated_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deprecated Date"
          },
          "owner_department": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owner Department"
          },
          "owner_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owner Name"
          },
          "upstream_kpis": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Upstream Kpis"
          },
          "approved_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approved By"
          },
          "approval_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approval Date"
          }
        },
        "type": "object",
        "required": [
          "kpi_id",
          "kpi_name",
          "calculation_formula",
          "version",
          "effective_date"
        ],
        "title": "KPIDefinition"
      },
      "ProductionEvent": {
        "properties": {
          "event_id": {
            "type": "string",
            "minLength": 1,
            "title": "Event Id"
          },
          "event_type": {
            "type": "string",
            "minLength": 1,
            "title": "Event Type"
          },
          "event_time": {
            "type": "string",
            "format": "date-time",
            "title": "Event Time"
          },
          "equipment_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Equipment Id"
          },
          "batch_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Id"
          },
          "parameters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parameters"
          },
          "source_system": {
            "type": "string",
            "enum": [
              "MES",
              "DCS",
              "Manual"
            ],
            "title": "Source System"
          },
          "source_record_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Record Id"
          },
          "quality_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quality Code"
          },
          "data_quality_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Quality Score"
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "event_type",
          "event_time",
          "source_system"
        ],
        "title": "ProductionEvent"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}