# GangQing 环境变量示例
 # 用法：复制为 .env.local 并填写真实值

 # 运行环境：dev / prod
 GANGQING_ENV=dev
 # 日志级别：DEBUG / INFO / WARNING / ERROR
 GANGQING_LOG_LEVEL=INFO
 # 日志格式：json / console
 # - json：结构化日志（生产默认推荐）
 # - console：开发调试更易读
 GANGQING_LOG_FORMAT=json

 # 多租户/多项目隔离（强制约束：通过请求头传递）
 # - X-Tenant-Id：租户 ID（必填）
 # - X-Project-Id：项目 ID（涉及资料范围/引用/证据链时必填；当前 PoC API 也要求传入）
 # 示例：
 #   curl -H "X-Tenant-Id: t1" -H "X-Project-Id: p1" ...

 # CORS 允许来源（逗号分隔）
 GANGQING_CORS_ALLOW_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

 # JWT 配置
 # JWT 密钥（生产环境必须修改；下方默认值仅用于开发环境）
 # 生成方式：openssl rand -hex 32
 GANGQING_JWT_SECRET=dev-secret-change-me
 # JWT 算法（PoC 默认 HS256；生产建议逐步迁移 RS256/ES256）
 GANGQING_JWT_ALG=HS256
 # 非对称 JWT（RS256/ES256）配置：仅当 GANGQING_JWT_ALG 设置为 RS256/ES256 时必填
 # 注意：建议将 key 以安全方式注入（例如 secret manager），不要直接提交到仓库
 GANGQING_JWT_PRIVATE_KEY=
 GANGQING_JWT_PUBLIC_KEY=
 # JWT 过期小时数
 GANGQING_JWT_EXP_HOURS=8

 # Refresh Token 过期天数
 GANGQING_JWT_REFRESH_EXP_DAYS=30

 # Refresh Token 单用户最多保留的有效 token 数
 # 超过上限时将撤销最旧的有效 token（避免滥用导致膨胀）
 GANGQING_JWT_REFRESH_MAX_TOKENS_PER_USER=5

 # 审计异步写入（默认关闭；开启后会通过线程池异步落库以降低请求阻塞）
 GANGQING_AUDIT_ASYNC_ENABLED=0
 GANGQING_AUDIT_ASYNC_MAX_WORKERS=4

 # 启动时引导创建管理员账号（可选；仅当账号不存在时创建）
 # 注意：生产环境应通过安全方式初始化管理员，不建议长期保留明文密码环境变量。
 GANGQING_BOOTSTRAP_ADMIN_USER_ID=
 GANGQING_BOOTSTRAP_ADMIN_PASSWORD=

 # PostgreSQL 连接串（SQLAlchemy URL）
 # 示例：postgresql+psycopg://user:password@localhost:5432/gangqing
 GANGQING_DATABASE_URL=

 # 上传目录（用于静态挂载 /uploads）
 GANGQING_UPLOAD_DIR=backend/uploads

 # 外部 API（可选）
 GEMINI_API_KEY=

 # Data Quality (T3)
 # 期望采样间隔（秒），用于缺失点估算
 GANGQING_DATA_QUALITY_EXPECTED_INTERVAL_SECONDS=60
 # 异常检测方法：zscore / iqr
 GANGQING_DATA_QUALITY_ANOMALY_METHOD=zscore
 # 异常检测 z-score 阈值
 GANGQING_DATA_QUALITY_ANOMALY_Z_THRESHOLD=3.0
 # 异常检测 IQR 倍数（当 method=iqr 时生效）
 GANGQING_DATA_QUALITY_ANOMALY_IQR_MULTIPLIER=1.5
 # 漂移检测最小点数
 GANGQING_DATA_QUALITY_DRIFT_MIN_POINTS=10
 # 评分权重（缺失/异常/漂移/质量码），取值范围 [0,1]
 GANGQING_DATA_QUALITY_MISSING_WEIGHT=0.6
 GANGQING_DATA_QUALITY_ANOMALY_WEIGHT=0.3
 GANGQING_DATA_QUALITY_DRIFT_WEIGHT=0.1
 GANGQING_DATA_QUALITY_QUALITY_CODE_WEIGHT=0.2
 # 质量码的“坏值”集合（逗号分隔，小写比较）
 GANGQING_DATA_QUALITY_QUALITY_CODE_BAD_VALUES=0,bad,invalid,unknown

 # 质量报表缓存（PoC 内存缓存，用于减少重复计算）
 # 是否启用：true/false
 GANGQING_DATA_QUALITY_REPORT_CACHE_ENABLED=true
 # TTL（秒）；设置为 0 表示不缓存
 GANGQING_DATA_QUALITY_REPORT_CACHE_TTL_SECONDS=300

 # Time series alignment (T3)
 # /api/v1/data/timeseries/align 的默认对齐窗口（秒）
 GANGQING_DATA_TIMESERIES_DEFAULT_WINDOW_SECONDS=60

 # Connectors (T3) - 仅用于 PoC 配置展示与健康检查预留，不会发起真实读写
 GANGQING_CONNECTORS_CHECK_TIMEOUT_SECONDS=0.5
 GANGQING_CONNECTOR_ERP_HOST=
 GANGQING_CONNECTOR_ERP_PORT=
 GANGQING_CONNECTOR_MES_HOST=
 GANGQING_CONNECTOR_MES_PORT=
 GANGQING_CONNECTOR_EAM_HOST=
 GANGQING_CONNECTOR_EAM_PORT=
 GANGQING_CONNECTOR_LIMS_HOST=
 GANGQING_CONNECTOR_LIMS_PORT=
 GANGQING_CONNECTOR_OT_HOST=
 GANGQING_CONNECTOR_OT_PORT=
